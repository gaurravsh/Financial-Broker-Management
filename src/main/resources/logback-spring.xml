<?xml version="1.0" encoding="UTF-8"?>
<configuration scan="true">

	<!-- This would import all the properties. To import specific properties, 
		use other methods. -->
	<property resource="application.yml" />

	<appender name="CONSOLE"
		class="ch.qos.logback.core.ConsoleAppender">
		<layout class="ch.qos.logback.classic.PatternLayout">
			<pattern>
				%d{HH:mm:ss.SSS} %green([%thread]) %highlight(%-5level) %logger{36} - %msg%n
			</pattern>
		</layout>
	</appender>

	<appender name="INFO-FILE-ROLLING"
		class="ch.qos.logback.core.rolling.RollingFileAppender">
		<file>${logs-folder}/info-level.html</file>

		<rollingPolicy
			class="ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy">
			<fileNamePattern>${logs-folder}/archived/app-info.%d{yyyy-MM-dd}.%i.html.gz
			</fileNamePattern>
			<!-- each archived file, size max 10MB -->
			<maxFileSize>10MB</maxFileSize>
			<!-- total size of all archive files, if total size > 20GB, it will delete 
				old archived file -->
			<totalSizeCap>20GB</totalSizeCap>
			<!-- 60 days to keep -->
			<maxHistory>60</maxHistory>
		</rollingPolicy>

		<encoder
			class="ch.qos.logback.core.encoder.LayoutWrappingEncoder">
			<layout class="ch.qos.logback.classic.html.HTMLLayout">
				<pattern>%thread%level%logger%msg</pattern>
			</layout>
		</encoder>
	</appender>

	<appender name="WARN-FILE-ROLLING"
		class="ch.qos.logback.core.rolling.RollingFileAppender">
		<file>${logs-folder}/warn-level.html</file>

		<rollingPolicy
			class="ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy">
			<fileNamePattern>${logs-folder}/archived/app-warn.%d{yyyy-MM-dd}.%i.html.gz
			</fileNamePattern>
			<!-- each archived file, size max 10MB -->
			<maxFileSize>10MB</maxFileSize>
			<!-- total size of all archive files, if total size > 20GB, it will delete 
				old archived file -->
			<totalSizeCap>20GB</totalSizeCap>
			<!-- 60 days to keep -->
			<maxHistory>60</maxHistory>
		</rollingPolicy>

		<encoder
			class="ch.qos.logback.core.encoder.LayoutWrappingEncoder">
			<layout class="ch.qos.logback.classic.html.HTMLLayout">
				<pattern>%thread%level%logger%msg</pattern>
			</layout>
		</encoder>
	</appender>

	<root level="info">
		<appender-ref ref="INFO-FILE-ROLLING" />
		<!-- <appender-ref ref="CONSOLE" /> -->
	</root>

</configuration>